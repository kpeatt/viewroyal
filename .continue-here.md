# Continue Here — Extracted Documents UI

**Paused:** 2026-02-18T17:13:43Z
**Status:** COMPLETE & DEPLOYED — just needs git commit

## What Was Done

Implemented the 3-tier document hierarchy UI (documents → extracted_documents → document_sections). All changes are deployed to Cloudflare Workers at viewroyal.ai.

### Files Changed
- `apps/web/app/lib/types.ts` — Added `ExtractedDocument` interface, `extracted_document_id` to `DocumentSection`
- `apps/web/app/lib/document-types.ts` — **NEW** — Type normalization (53 raw types → 10 canonical), label/color utilities
- `apps/web/app/components/markdown-content.tsx` — **NEW** — Markdown renderer using `marked` (not react-markdown, which caused hydration issues)
- `apps/web/app/services/meetings.ts` — Added `getExtractedDocumentsForDocument`, `getExtractedDocumentsForMeeting`
- `apps/web/app/routes/document-viewer.tsx` — Major rewrite: collapsible extracted doc cards, TOC sidebar, grouped sections
- `apps/web/app/routes/meeting-detail.tsx` — Loader fetches extractedDocuments, documents tab shows grouped view, passes to AgendaOverview
- `apps/web/app/components/meeting/DocumentSections.tsx` — Grouped view with extracted doc headers, markdown rendering
- `apps/web/app/components/meeting/AgendaOverview.tsx` — Passes extractedDocuments through to DocumentSections
- `apps/web/package.json` + `pnpm-lock.yaml` — Added `marked` dependency

### Key Decisions
- Used `marked` instead of `react-markdown` to avoid SSR hydration mismatches on Cloudflare Workers
- Document viewer starts collapsed — users click to expand individual extracted documents
- Summary preview (2-line clamp) visible in collapsed state
- Orphan sections (no extracted_document_id) shown at bottom of document viewer

## To Resume
1. Commit the changes (all web app files listed above)
2. No further implementation needed — work is complete
3. Next project work: Phase 7.1 re-extraction (blocked on Gemini API quota) or Phase 9 planning
